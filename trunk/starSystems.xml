<?xml version="1.0" ?>
<!DOCTYPE TranscendenceExtension
[
	<!ENTITY modBoCStarSystems              "0xEFFFA010">
	<!ENTITY ssBoC2Gate01                   "0xEFFFA011">
	<!ENTITY ssBoC3Gate01		            "0xEFFFA012">
	<!ENTITY ssBoC4Gate01		            "0xEFFFA013">
	<!ENTITY ssBoCEnemyHQ01		            "0xEFFFA014">
	<!ENTITY ssBoCEnemyHQ02		            "0xEFFFA015">
	<!ENTITY ssBoCEnemyHQ03		            "0xEFFFA016">
	<!ENTITY ssBoCEnemyHQ04		            "0xEFFFA017">
	<!ENTITY ssBoCFriendly01		        "0xEFFFA018">
	<!ENTITY ssBoCFriendly02                "0xEFFFA019">
	<!ENTITY ssBoCFriendly03	            "0xEFFFA01A">
	<!ENTITY ssBoCFriendly04	            "0xEFFFA01B">
	<!ENTITY ssBoCFriendly05	            "0xEFFFA01C">
	<!ENTITY ssBoCFriendly06	            "0xEFFFA01D">
	<!ENTITY ssBoCFriendly07	            "0xEFFFA01E">
	<!ENTITY ssBoCFriendly08	            "0xEFFFA01F">
	<!ENTITY ssBoCFriendly09	            "0xEFFFA020">
	<!ENTITY ssBoCFriendly10	            "0xEFFFA021">
	<!ENTITY ssBoCFriendly11	            "0xEFFFA022">
	<!ENTITY ssBoCFriendly12	            "0xEFFFA023">
    
	<!ENTITY rsAnomoly      	            "0xEFFF2000">
	<!ENTITY stAnomoly      	            "0xEFFF2001">
	<!ENTITY rsFounderAlien      	            "0xEFFF2002">
	<!ENTITY stFounderAlien     	            "0xEFFF2003">
	<!ENTITY rsFounderGateControl  	            "0xEFFF2004">
	<!ENTITY stFounderGateControl	            "0xEFFF2005">
	<!ENTITY tbHubTraffic      	            "0xEFFF2006">
	<!ENTITY evHubTrafficBehavior    	    "0xEFFF2007">
	<!ENTITY stPegasusStargate   	 	    "0xEFFF2008">
	<!ENTITY stPegasusFarStargate    	    "0xEFFF2009">
]>

<TranscendenceExtension UNID="&modBoCStarSystems;" version="1.0" name="BoC Star Systems" credits="Everyone">

<!--  ###################################################################
      UNID SPACE
      ###################################################################

Adventure Setup:
  0xEFFF0001 - 0xEFFF0009
Systems:
  0xEFFF0010 - 0xEFFF0100
PlayerShips:
  0xEFFFA000 - 0xEFFFA100
Planets and stars
  0xEFFF2000 - 0xEFFF2100
Stations (structures)
  0xEFFF2101 - 0xEFFF2FFF
    
-->

<!----              Resources           --->
<Image UNID="&rsAnomoly;"	bitmap="resources\nova5.bmp" bitmask="resources\nova5mask.bmp"/>


	<StationType UNID="&stAnomoly;"
		name=				"(star)"
		scale=				"star"
		backgroundObject=	"true" 
		sovereign=			"&svIndependent;"

		attributes=			"star; anomaly"
		>
    <Image			imageID="&rsAnomoly;" imageX="0" imageY="0" imageWidth="256" imageHeight="256" imageFrameCount="5" imageTicksPerFrame="2"/>
	</StationType>
	
		<!-- Founder Alien Stations -->

	<StationType UNID="&stFounderAlien;"
			name=				"Founder Station"
			sovereign=			"&svIndependent;"
			dockScreen=			"Main"

			multiHull=			"true"
			immutable=			"true"
			attributes=			"founderAlien; founder"
			noArticle=			"true"
			>

		<Image imageID="&rsStations7;" imageX="0" imageY="768" imageWidth="256" imageHeight="256"/>

		<DockScreens>

			<Main
				name=			"=(objGetName gSource)"
				>

				<Panes>
					<Default
							desc=	"You are docked at one of the alien stations occupied by the Founders. A large energy barrier sepparates the public docking bay with the station's interior. Because this is just a placeholder text. BTW - someone make sure wolfy gets the new graphics by sunday. :3">

						<Actions>
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>

						</Actions>

					</Default>
				</Panes>
			</Main>

		</DockScreens>

		<DockingPorts>
			<Port x="79"	y="75" />
			<Port x="0"		y="100" />
			<Port x="-73"	y="74" />
			<Port x="-109"	y="0" />
			<Port x="-87"	y="-75" />
			<Port x="0"		y="-109" />
			<Port x="82"	y="-82" />
			<Port x="109"	y="8" />
		</DockingPorts>
	</StationType>

		<!-- Tan Ru Dorem -->

	<StationType UNID="&stFounderGateControl;"
			name=				"Alien Far-Gate Control Center"
			sovereign=			"&svIndependent;"
			dockScreen=			"Main"

			multiHull=			"true"
			immutable=			"true"
			attributes=			"founder; founderAlien; founderFarGateControl"
			noArticle=			"true"
			>

		<Image imageID="&rsStations7;" imageX="0" imageY="768" imageWidth="256" imageHeight="256"/>

		<Events>
			<OnCreate>
				(block Nil
					(enum (sysFindObject gSource "T +founder") theObj
						(block Nil
							; Create some visiting ships
							(for i 1 (random 2 3)
								(block (theShip)
									(setq theShip (sysCreateShip 
										&tbHubTraffic;
										(sysVectorPolarOffset theObj (random 0 359) 10)
										&svCommonwealth;
										&evHubTrafficBehavior;
										))
										
									(setq aDockObj theObj)
									(objFireEvent theShip "OrderDockAtHub")
									)
								)
							
							; Register for events from all the objects that make up
							; the arcology
							(objRegisterForEvents gSource theObj)
							)
						)
						
					; Register a callbacks
					(sysAddObjRecurringTimerEvent 90 gSource "OnTrafficControl")
					)
			</OnCreate>
			<OnTrafficControl>
				(block (totalShips)
					; Count the number of ships under traffic control
					(setq totalShips (count (sysFindObject Nil "s D:0010201F_status")))
					
					; If less than the ideal number, new ships jump in
					(if (ls totalShips 200)
						(block (theShip theTarget)
							(setq theShip (sysCreateShip 
								&tbHubTraffic;
								(random (sysFindObject Nil "G"))
								&svCommonwealth;
								&evHubTrafficBehavior;
								))
								
							(objFireEvent theShip "OrderEnterSystem")
							)
						)
					)
			</OnTrafficControl>
		</Events>
		
		<DockScreens>

			<Main
				name=			"=(objGetName gSource)"
				>

				<Panes>
					<Default
							desc=	"You are docked at the station the founders use to control the Far-Gate network. From here, they can activate and deactivate the gates at will. A puppy is sitting in the docking bay, waiting for Wolfy to get the new graphics done. :3">

						<Actions>
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>

						</Actions>

					</Default>
				</Panes>
			</Main>

		</DockScreens>

		<DockingPorts>
			<Port x="79"	y="75" />
			<Port x="0"		y="100" />
			<Port x="-73"	y="74" />
			<Port x="-109"	y="0" />
			<Port x="-87"	y="-75" />
			<Port x="0"		y="-109" />
			<Port x="82"	y="-82" />
			<Port x="109"	y="8" />
		</DockingPorts>
	</StationType>
	
		<!-- Majellen Stargate -->

	<StationType UNID="&stPegasusFarStargate;"
			name=				"(stargate)"
			sovereign=			"&svIndependent;"
			dockScreen=			"Main"
			dockingPorts=		"4"

			multiHull=			"true"
			immutable=			"true"
			attributes=			"pegasus; farGate"

			gateEffect=			"&efStargateOut;"

			definiteArticle=	"true"
			>
		<Image imageID="&rsStargate;" imageX="0" imageY="128" imageWidth="192" imageHeight="192" imageFrameCount="12" imageTicksPerFrame="3"/>

		<DockScreens>

			<Main
				name=			"=(objGetName gSource)"
				>

				<Panes>
					<Default
							desc=	"You are docked at an alien stargate, one that is connected to the Pegasus Far-Gate Network of stargates. These gates are controlled by the Triad from the control station in the Hub. Use of this gate comes at a price.">

						<Actions>
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>

						</Actions>

					</Default>
				</Panes>
			</Main>

		</DockScreens>

	</StationType>
	
    <!---   Core system #1  -  Starting system  --->
    
    <SystemType UNID="&ssBoCFriendly01;" noRandomEncounters="true">
        <Tables>
            <MajorStations>                      ;; these should be switched to hardcoded stations eventually
                <Table>
                    <Station chance="50"  type="&stArmsDealerRasiermesser;"noMapLabel="true"/>
                    <Station chance="50"  type="&stArmsDealerMakayev;"noMapLabel="true"/>
                </Table>
            </MajorStations>
            <MinorStations>                      ;; these should be switched to hardcoded stations eventually
                <Table>
                    <Station chance="100" type="&stCommonwealthSlums;" noMapLabel="true"/>
                </Table>
            </MinorStations>
            <!-- Random Stations -->
			
			<FriendlyOuterStations>
				<Table>
					<Station weight="20" type="&stContainerHabitat;"/>
					<Station weight="20" type="&stCommonwealthSlums;"/>
					<Station weight="15" type="&stFuelDepot;"/>
					<Station weight="15" type="&stIceFarm;"/>
					<Station weight="10" type="&stArmorDealer;"/>
					<Station weight="10" type="&stArmsDealer;"/>
					<Station weight="10" type="&stSistersOfDomina;"/>
					<Station weight="5"  type="&stHotel;"/>
					<Station weight="5"  type="&stArmsDealerRasiermesser;"/>
					<Station weight="5"  type="&stArmsDealerMakayev;"/>
				</Table>
			</FriendlyOuterStations>

			<FriendlyStations>
				<Table>
					<Station weight="20" type="&stCorporateEnclave;"/>
					<Station weight="20" type="&stCommonwealthResidentials;"/>
					<Station weight="15" type="&stFuelDepot;"/>
					<Station weight="15" type="&stHotel;"/>
					<Station weight="10" type="&stContainerHabitat;"/>
					<Station weight="10" type="&stCommonwealthSlums;"/>
					<Station weight="10" type="&stArmorDealer;"/>
					<Station weight="10" type="&stArmsDealer;"/>
					<Station weight="10" type="&stManufacturingPlant;"/>
					<Station weight="5"  type="&stTinkerGathering;"/>
					<Station weight="5"  type="&stCommonwealthDryDock;"/>
					<Station weight="5"  type="&stArmsDealerRasiermesser;"/>
					<Station weight="5"  type="&stArmsDealerMakayev;"/>
					<Station weight="5"  type="&stInsuranceCompany;"/>
					<Station weight="5"  type="&stSistersOfDomina;"/>
					<Station weight="2"  type="&stArmsDealerBushido;"/>
				</Table>
			</FriendlyStations>

			<EnemyStations>
				<Table>
					<Station weight="15" type="&stOutlawHaven;"				noReinforcements="true"/>
					<Station weight="15" type="&stCharonPirateOutpost3;"	noReinforcements="true"/>
					<Station weight="10" type="&stTerroristCamp;"			noReinforcements="true"/>
					<Station weight="10" type="&stMarauderOutpost;"			noReinforcements="true"/>
					<Station weight="5"  type="&stTerroristCompound;"		noReinforcements="true"/>
					<Station weight="5"  type="&stMarauderCompound;"		noReinforcements="true"/>
					<Station weight="5"  type="&stDrugCartelOutpost;"		noReinforcements="true"/>
					<Station weight="5"  type="&stWeaponsCache;"			noReinforcements="true"/>
					<Station weight="5"  type="&stSungSlaveCamp;"			noReinforcements="true"/>
				</Table>
			</EnemyStations>

		
        </Tables>
            
        <SystemGroup>
            <Station type="&stAnomoly;" />                                         ;; change this graphic, this is the main entry gate
            <Orbitals distance="0" angle="0">
                <Marker objName="Start"/>
            </Orbitals>
            <!---
                                            Hub gates (Far-Gates)
                                        There will be more here eventually
            --->
			<Orbitals distance="20" angle="equidistant">
                <Stargate objName="Core1-Core2" type="&stMajellenStargate;" noMapLabel="true"/>
                <Station type="&stStargateBeacon;"/>
                <Station type="&stStargateBeacon;"/>
                <Stargate objName="Core1-Core3" type="&stMajellenStargate;" noMapLabel="true"/>
                <Station type="&stStargateBeacon;"/>
                <Station type="&stStargateBeacon;"/>
                <Stargate objName="Gate1" type="&stMajellenStargate;" noMapLabel="true"/>
                <Station type="&stStargateBeacon;"/>
                <Station type="&stStargateBeacon;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;" noMapLabel="true"/>
                <Station type="&stStargateBeacon;"/>
                <Station type="&stStargateBeacon;"/>
                <Stargate objName="Endgame" type="&stMajellenStargate;" noMapLabel="true"/>                   ;; move/hide this
                <Station type="&stStargateBeacon;"/>
                <Station type="&stStargateBeacon;"/>
            </Orbitals>
            
            <!--
            			Alien stations (Founder Occupied)
            -->

            <Orbitals distance="40" angle="equidistant">
            	<Station type="&stFounderAlien;" noMapLabel="true"/>
            	<Station type="&stFounderAlien;" noMapLabel="true"/>
            	<Station type="&stFounderAlien;" noMapLabel="true"/>
            	<Station type="&stFounderAlien;" noMapLabel="true"/>
            	<Station type="&stFounderAlien;" noMapLabel="true"/>
            </Orbitals>
            
            <!-- Alien command station (Founder controlled) -->
            
            <Orbitals distance="45-55" angle="random">
            <Station type="&stFounderGateControl;"/>
            </Orbitals>
            
            <!---
                                            Heavy traffic and some minor stations
            --->
            
            <!-- CW placeholder station representing a fortress -->
            
            <Orbitals count="1" distance="60-65" angle="random">
            	<Station type="&stCommonwealthStationArmored;"/>
            </Orbitals>
            
            <!-- high end stations; placeholders right now -->
            
            <Orbitals count="10" distance="70-100" angle="random">
                <Lookup table="FriendlyStations" />
            </Orbitals>

            <Orbitals count="10" distance="100-180" angle="random">
                <Lookup table="MinorStations" />
            </Orbitals>

            <Orbitals count="10" distance="180-350" angle="random">
                <Lookup table="FriendlyOuterStations" />
            </Orbitals>

            <!-- inner belt -->
            		<Orbitals distance="400" angle="random">
				<Group>
					<Siblings count="200" distribution="4d60-122">
						<Lookup table="AsteroidSmall"/>
					</Siblings>

					<Siblings count="10" distribution="4d20-42">
						<Lookup table="AsteroidMedium"/>
					</Siblings>
				</Group>
			</Orbitals>
			
			<Orbitals count="2d2+1" distance="380-420" angle="minSeparation:10">
				<Lookup table="FriendlyStations"/>
			</Orbitals>
            
            <!---
                                         Three stars
                                     each star has the major stations
                                     orbitting it, currently just some random minor ones
                                     as placeholders
                                     
            --->
            <Orbitals count="3" distance="600" angle="equidistant">
                <Group angle="0">
                    <Primary>
                        <Station    type="&stG-TypeStar;"
                                    showOrbit="true"
                                    name="Star 1"
                                    />
                    </Primary>
                    <Orbitals distance="600" angle="random">
                        <Station type="&stStargateBeacon;" showOrbit="true" noMapLabel="true"/>
                    </Orbitals>
                    <Orbitals distance="20" angle="equidistant">
                        <Station type="&stGreenhousePlanet;" showOrbit="true"/>
                        <Lookup table="MajorStations" noMapLabel="true"/>
                        <Lookup table="MajorStations" noMapLabel="true"/>
                    </Orbitals>
                    <Orbitals count="8" distance="35" angle="equidistant">
                        <Lookup table="FriendlyStations" noMapLabel="true"/>
                    </Orbitals>
                    <Orbitals count="14" distance="50" angle="equidistant">
                        <Lookup table="FriendlyOuterStations" noMapLabel="true"/>
                    </Orbitals>

					<Trojan>
						<Group>
                            <Primary>
                                <Station type="&stMiningColony;" noMapLabel="true"/>
                            </Primary>

							<Orbitals count="3" distance="25-120" angle="random">
                                <Station type="&stMiningColony;" noMapLabel="true"/>
							</Orbitals>

							<Orbitals count="20d4+4" distance="1-80" angle="random">
								<Lookup table="AsteroidSmall"/>
							</Orbitals>

							<Orbitals count="20d4+4" distance="50-200" angle="random">
								<Lookup table="AsteroidSmall"/>
							</Orbitals>

							<Orbitals count="10d6" distance="5-150" angle="random">
								<Lookup table="AsteroidMedium"/>
							</Orbitals>
						</Group>
					</Trojan>
                </Group>

                <Group>
                    <Primary>
                        <Station type="&stG-TypeStar;"/>
                    </Primary>
                    <Orbitals distance="600" angle="random">
                        <Station type="&stStargateBeacon;" showOrbit="true" noMapLabel="true"/>
                    </Orbitals>
                    <Orbitals distance="40" angle="equidistant">
                        <Station type="&stGreenhousePlanet;" showOrbit="true"/>
                        <Lookup table="MajorStations" noMapLabel="true"/>
                        <Lookup table="MajorStations" noMapLabel="true"/>
                    </Orbitals>
                    <Orbitals count="8" distance="35" angle="equidistant">
                        <Lookup table="FriendlyStations" noMapLabel="true"/>
                    </Orbitals>
                    <Orbitals count="14" distance="50" angle="equidistant">
                        <Lookup table="FriendlyOuterStations" noMapLabel="true"/>
                    </Orbitals>

					<Trojan>
						<Group>
                            <Primary>
                                <Station type="&stMiningColony;" noMapLabel="true"/>
                            </Primary>

							<Orbitals count="3" distance="25-120" angle="random">
                                <Station type="&stMiningColony;" noMapLabel="true"/>
							</Orbitals>

							<Orbitals count="20d4+4" distance="1-80" angle="random">
								<Lookup table="AsteroidSmall"/>
							</Orbitals>

							<Orbitals count="20d4+4" distance="50-200" angle="random">
								<Lookup table="AsteroidSmall"/>
							</Orbitals>

							<Orbitals count="10d6" distance="5-150" angle="random">
								<Lookup table="AsteroidMedium"/>
							</Orbitals>
						</Group>
					</Trojan>
               </Group>

               <Group>
                    <Primary>
                        <Station type="&stG-TypeStar;"/>
                    </Primary>
                    <Orbitals distance="600" angle="random">
                        <Station type="&stStargateBeacon;" showOrbit="true" noMapLabel="true"/>
                    </Orbitals>
                    <Orbitals distance="40" angle="equidistant">
                        <Station type="&stGreenhousePlanet;" showOrbit="true"/>
                        <Lookup table="MajorStations" noMapLabel="true"/>
                        <Lookup table="MajorStations" noMapLabel="true"/>
                    </Orbitals>
                    <Orbitals distance="600">
                        <Marker name="Star 3 orbit" showorbit="true"/>
                    </Orbitals>
                    <Orbitals count="8" distance="35" angle="equidistant">
                        <Lookup table="FriendlyStations" noMapLabel="true"/>
                    </Orbitals>
                    <Orbitals count="14" distance="50" angle="equidistant">
                        <Lookup table="FriendlyOuterStations" noMapLabel="true"/>
                    </Orbitals>

					<Trojan>
						<Group>
                            <Primary>
                                <Station type="&stMiningColony;" noMapLabel="true"/>
                            </Primary>

							<Orbitals count="3" distance="25-120" angle="random">
                                <Station type="&stMiningColony;" noMapLabel="true"/>
							</Orbitals>

							<Orbitals count="20d4+4" distance="1-80" angle="random">
								<Lookup table="AsteroidSmall"/>
							</Orbitals>

							<Orbitals count="20d4+4" distance="50-200" angle="random">
								<Lookup table="AsteroidSmall"/>
							</Orbitals>

							<Orbitals count="10d6" distance="5-150" angle="random">
								<Lookup table="AsteroidMedium"/>
							</Orbitals>
						</Group>
					</Trojan>
               </Group>
            </Orbitals>
                <!-- outer ring -->
            		<Orbitals distance="1300" angle="random">
				<Group>
					<Siblings count="500" distribution="4d60-122">
						<Lookup table="AsteroidSmallFrost"/>
					</Siblings>

					<Siblings count="50" distribution="4d20-42">
						<Lookup table="AsteroidMediumFrost"/>
					</Siblings>
				</Group>
			</Orbitals>
			
			<Orbitals count="2d4+4" distance="1250-1350" angle="minSeparation:10">
				<Lookup table="FriendlyOuterStations"/>
			</Orbitals>
            
        </SystemGroup>
        <Events>
            <OnGlobalSystemCreated>
                (enum (sysFindObject nil "t") o (objsetknown o))
            </OnGlobalSystemCreated>
        </Events>
    </SystemType>

    <!---   Core system #2   --->
    
    <SystemType UNID="&ssBoCFriendly02;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Core2-Core1" type="&stMajellenStargate;"/>
                <Stargate objName="Core2-Core3" type="&stMajellenStargate;"/>
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Core system #3   --->
    
    <SystemType UNID="&ssBoCFriendly03;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Core3-Core1" type="&stMajellenStargate;"/>
                <Stargate objName="Core3-Core2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   KorolovHQ  --->
    
    <SystemType UNID="&ssBoCFriendly04;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
                <Stargate objName="Gate4" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Teraton Camp  --->
    
    <SystemType UNID="&ssBoCFriendly05;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
                <Stargate objName="Gate4" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Teraton HQ  --->
    
    <SystemType UNID="&ssBoCFriendly06;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   CWMilitaOutpost  --->
    
    <SystemType UNID="&ssBoCFriendly07;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
                <Stargate objName="Gate4" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   CWFLeetOutpost  --->
    
    <SystemType UNID="&ssBoCFriendly08;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
                <Stargate objName="Gate4" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Ringer outpost  --->
    
    <SystemType UNID="&ssBoCFriendly09;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Black market HQ  --->
    
    <SystemType UNID="&ssBoCFriendly10;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
                <Stargate objName="Gate4" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Rasiermesser HQ  --->
    
    <SystemType UNID="&ssBoCFriendly11;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
                <Stargate objName="Gate4" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Breadbasket  --->
    
    <SystemType UNID="&ssBoCFriendly12;" noRandomEncounters="true">
        <SystemGroup>
            <Station type="&stBlueGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Charon Pirates HQ   --->
    
    <SystemType UNID="&ssBoCEnemyHQ01;">
        <SystemGroup>
            <Station type="&stRedGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Ares HQ   --->
    
    <SystemType UNID="&ssBoCEnemyHQ02;">
        <SystemGroup>
            <Station type="&stRedGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Sung HQ   --->
    
    <SystemType UNID="&ssBoCEnemyHQ03;">
        <SystemGroup>
            <Station type="&stRedGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Ranx HQ   --->
    
    <SystemType UNID="&ssBoCEnemyHQ04;">
        <SystemGroup>
            <Station type="&stRedGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Random Enemy system - 2 stargates   --->
    
    <SystemType UNID="&ssBoC2Gate01;">
        <SystemGroup>
            <Station type="&stRedGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Random Enemy system - 3 stargates   --->
    
    <SystemType UNID="&ssBoC3Gate01;">
        <SystemGroup>
            <Station type="&stRedGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!---   Random Enemy system - 4 stargates   --->
    
    <SystemType UNID="&ssBoC4Gate01;">
        <SystemGroup>
            <Station type="&stRedGiantStar;"/>
            <Orbitals distance="30" angle="equidistant">
                <Stargate objName="Gate1" type="&stMajellenStargate;"/>
                <Stargate objName="Gate2" type="&stMajellenStargate;"/>
                <Stargate objName="Gate3" type="&stMajellenStargate;"/>
                <Stargate objName="Gate4" type="&stMajellenStargate;"/>
            </Orbitals>
        </SystemGroup>
    </SystemType>

    <!-- Tables & Behaviors -->
    
    <!-- HUB Traffic -->
    
    <!-- BEHAVIORS -->

	<ShipClass UNID="&evHubTrafficBehavior;"
			class=				"(Hub traffic behavior)"
			virtual=			"true"
			
			attributes=			"behaviorClass"
			>

		<Events>
			<OrderDockAtHubStation>
				(block Nil
					(shpOrder gSource 'dock aDockObj)
					(shpOrder gSource 'wait (random 10 200))
					(objSetData gSource "0010201F_status" 'dockedAtHub)
					)
			</OrderDockAtHubStation>
			
			<OrderEnterSystem>
				(objSetData gSource "0010201F_status" 'enteredSystem)
			</OrderEnterSystem>
			
			<OnOrdersCompleted>
				(block (status dockedAt allLoot)
					; Different order depending on our current state
					(setq status (objGetData gSource "0010201F_status"))
					(setq dockedAt (shpGetDockObj gSource))
					
					; If we're docked at an object, dump any loot that we found
					(if (and dockedAt
							(objHasAttribute dockedAt "populated")
							
							; Compose a list of all loot on board that the station
							; might want to buy from us.
							
							(setq allLoot (filter (objGetItems gSource "*~mf U") theItem
								(objGetBuyPrice dockedAt theItem)
								))
							)
						(block Nil
							(enum allLoot theItem (objRemoveItem gSource theItem))
							(enum allLoot theItem (objAddItem dockedAt theItem))
							)
						)
					
					; Figure out what to do next
					(switch
						(eq status 'enteredSystem)
							(block Nil
								(setq theTarget (random (sysFindObject gSource "T +founderAlien")))
								(shpOrder gSource 'orbit (sysFindObject Nil "T +anomaly;") 25 (random 20 40))
								(shpOrder gSource 'dock theTarget)
								(shpOrder gSource 'wait (random 10 60))
								(objSetData gSource "0010201F_status" 'dockedAtHub)
								)
								
						(eq status 'dockedAtHub)
							(block (roll allWrecks)
								; When leaving new victoria, orbit around for a bit
								(shpOrder gSource 'orbit (shpGetDockObj gSource) 5 (random 1 8))
								
								; Randomly choose a path
								(setq roll (random 1 100))
								(switch
									; Gate out
									(leq roll 30)
										(block Nil
											(shpOrder gSource 'gate)
											(objSetData gSource "0010201F_status" 'leavingSystem)
											)
											
									; If there are wrecks in the area, loot them
									(and (leq (objGetDestiny gSource) 180)
											(not (objHasAttribute gSource "freighter"))
											(leq (random 1 100) 50)
											
											; Compose a list of all wrecks in the area
											
											(setq allWrecks (filter (sysFindObject gSource "TK N:100; +shipwreck; -uncharted; -locked;") theObj
												(not (objGetData theObj "0010201F_marked"))
												))
											)
										(block (destObj)
											(setq destObj (random allWrecks))
											(shpOrder gSource 'loot destObj)
											(objSetData destObj "0010201F_marked" True)
											(objSetData gSource "0010201F_status" 'dockedAtStation)
											)
											
									; Dock at a random station in the system
									(block (theTarget)
										(setq theTarget (random (sysFindObject gSource "TAF +populated; -founderAlien; -anomaly;")))
										(shpOrder gSource 'dock theTarget)
										(shpOrder gSource 'wait (random 10 20))
										(objSetData gSource "0010201F_status" 'dockedAtStation)
										)
									)
								)
								
						(eq status 'dockedAtStation)
							(block (roll allWrecks)
								; Randomly choose a path
								(setq roll (random 1 100))
								(switch
									; Gate out
									(leq roll 30)
										(block Nil
											(shpOrder gSource 'gate)
											(objSetData gSource "0010201F_status" 'leavingSystem)
											)
											
									; If there are wrecks in the area, loot them
									(and (leq (objGetDestiny gSource) 180)
											(not (objHasAttribute gSource "freighter"))
											(leq (random 1 100) 50)
											
											; Compose a list of all wrecks in the area
											
											(setq allWrecks (filter (sysFindObject gSource "TK N:100; +shipwreck; -uncharted; -locked;") theObj
												(not (objGetData theObj "0010201F_marked"))
												))
											)
										(block (destObj)
											(setq destObj (random allWrecks))
											(shpOrder gSource 'loot destObj)
											(objSetData destObj "0010201F_marked" True)
											(objSetData gSource "0010201F_status" 'dockedAtStation)
											)
											
									; Dock at founder stations
									(leq roll 80)
										(block (theTarget)
											(setq theTarget (random (sysFindObject gSource "T +founderAlien")))
											(shpOrder gSource 'orbit (sysFindObject Nil "T +anomaly;") 20 (random 20 40))
											(shpOrder gSource 'dock theTarget)
											(shpOrder gSource 'wait (random 10 60))
											(objSetData gSource "0010201F_status" 'dockedAtHub)
											)
											
									; Dock at a random station in the system
									(block (theTarget)
										(setq theTarget (random (sysFindObject gSource "TAF +populated; -founderAlien; -anomaly;")))
										(shpOrder gSource 'dock theTarget)
										(shpOrder gSource 'wait (random 10 20))
										(objSetData gSource "0010201F_status" 'dockedAtStation)
										)
									)
								)
						)
						
					; If we were docked at an object that we just looted, then destroy the object
					(if (objGetData dockedAt "0010201F_marked")
						(objDestroy dockedAt gSource)
						)
					)
			</OnOrdersCompleted>
		</Events>
	</ShipClass>
	
<!-- SHIP TABLES -->

	<ShipTable unid="&tbHubTraffic;">
		<Table>
			<Ship chance="2"	class="&scAntaresI;"/>
			<Ship chance="4"	class="&scAntaresII;"/>
			<Ship chance="3"	class="&scAntaresV;"/>
			<Ship chance="3"	class="&scEI7000;"/>
			<Ship chance="8"	class="&scEI500;"/>
			<Ship chance="9"	class="&scEI200;"/>
			<Ship chance="14"	class="&scEI100;"/>
			<Ship chance="5"	class="&scIAVLight;"/>
			<Ship chance="10"	class="&scIAVMedium;"/>
			<Ship chance="5"	class="&scIAVHeavy;"/>
			<Ship chance="10"	class="&scSapphireYacht;"/>
			<Ship chance="3"	class="&scScarabFreighter;"/>
			<Ship chance="14"	class="&scRoninB;"/>
			<Ship chance="10"	class="&scWolfen;"/>
		</Table>
	</ShipTable>
    
    
    
</TranscendenceExtension>